<Page x:Class="BankingEcosystem.Atm.UI.Views.PinEntryView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Masukkan PIN"
      Background="{StaticResource DarkNavyBrush}"
      Focusable="True"
      KeyDown="OnKeyDown">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Top Bar (Transparent background to match body) -->
        <Border Grid.Row="0" Padding="32,20" Background="Transparent">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Bank Logo / Name -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Gold circle logo placeholder -->
                    <Ellipse Width="40" Height="40" Fill="{StaticResource GoldBrush}" Margin="0,0,12,0" />
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="Bank Ecosystem"
                                   FontSize="20" FontWeight="Bold"
                                   Foreground="{StaticResource WhiteBrush}"
                                   FontFamily="{StaticResource PrimaryFont}" />
                        <TextBlock Text="Simulasi ATM"
                                   FontSize="11" Foreground="#80FFFFFF"
                                   FontFamily="{StaticResource PrimaryFont}" />
                    </StackPanel>
                </StackPanel>

                <!-- Clock -->
                <TextBlock x:Name="ClockText" Grid.Column="1"
                           FontSize="16" Foreground="#B0FFFFFF"
                           VerticalAlignment="Center"
                           FontFamily="{StaticResource MonoFont}" />
            </Grid>
        </Border>

        <!-- PIN Entry Content -->
        <Grid Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Left Side: Info & Indicators -->
            <!-- Left Side: Info & Indicators -->
            <StackPanel x:Name="InfoPanel" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,64,0">
                <!-- Lock Icon -->
                <Border x:Name="LockBorder" Width="80" Height="80" CornerRadius="40"
                        Background="#15FFFFFF" Margin="0,0,0,24"
                        HorizontalAlignment="Left">
                    <TextBlock Text="&#x1F512;" FontSize="32"
                               HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Border>

                <TextBlock x:Name="TitleText" Style="{StaticResource HeadingStyle}"
                           FontSize="26" Margin="-76,0,0,8"
                           HorizontalAlignment="Left">
                    Masukkan PIN Anda
                </TextBlock>

                <TextBlock x:Name="SubtitleText" Style="{StaticResource SubHeadingStyle}"
                           FontSize="14" Margin="-76,0,0,32"
                           HorizontalAlignment="Left">
                    Gunakan keypad di kanan atau keyboard Anda
                </TextBlock>

                <!-- PIN Dots Display -->
                <!-- Shifted more left so Lock Icon (center) aligns with Dots 5-6 -->
                <StackPanel x:Name="PinDotsPanel" Orientation="Horizontal"
                            HorizontalAlignment="Left" Margin="-160,0,0,12">
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot1" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot2" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot3" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot4" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot5" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                    <Border Style="{StaticResource PinDigitStyle}">
                        <Ellipse x:Name="Dot6" Width="14" Height="14" Fill="#30FFFFFF" />
                    </Border>
                </StackPanel>

                <!-- Status Message -->
                <TextBlock x:Name="StatusText"
                           Style="{StaticResource BodyStyle}"
                           FontSize="13" Margin="-56,0,0,0"
                           Foreground="#70FFFFFF"
                           HorizontalAlignment="Left" />
            </StackPanel>

            <!-- Right Side: Keypad -->
            <Grid x:Name="KeypadGrid" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Row 1 -->
                <Button Grid.Row="0" Grid.Column="0" Content="1" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="0" Grid.Column="1" Content="2" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="0" Grid.Column="2" Content="3" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />

                <!-- Row 2 -->
                <Button Grid.Row="1" Grid.Column="0" Content="4" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="1" Grid.Column="1" Content="5" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="1" Grid.Column="2" Content="6" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />

                <!-- Row 3 -->
                <Button Grid.Row="2" Grid.Column="0" Content="7" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="2" Grid.Column="1" Content="8" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                <Button Grid.Row="2" Grid.Column="2" Content="9" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />

                <!-- Row 4: Cancel / 0 / Enter -->
                <Button Grid.Row="3" Grid.Column="0" Style="{StaticResource KeypadButtonStyle}" Margin="6"
                        FontSize="16" Click="OnCancelClick" Background="#20FFFFFF">
                    <TextBlock Text="âœ•" FontWeight="Bold" Foreground="#FF6B6B" />
                </Button>
                
                <Button Grid.Row="3" Grid.Column="1" Content="0" Style="{StaticResource KeypadButtonStyle}" Margin="6" Click="OnKeypadClick" />
                
                <Button Grid.Row="3" Grid.Column="2" Style="{StaticResource KeypadButtonStyle}" Margin="6"
                        FontSize="16" Click="OnConfirmClick" Background="#20FFFFFF">
                    <TextBlock Text="OK" FontWeight="Bold" Foreground="{StaticResource SuccessBrush}" />
                </Button>
            </Grid>
        </Grid>

        <!-- Bottom Actions (Removed for cleanliness, use Keypad) -->
        <Grid Grid.Row="2" Margin="48,0,48,24">
            <!-- Space reserved for future or status messages -->
        </Grid>
    </Grid>
</Page>
